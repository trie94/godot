#!/usr/bin/env python

Import("env")

env_swappy = env.Clone()

# Thirdparty source files

thirdparty_obj = []

thirdparty_dir = "#thirdparty/swappy/src/"
thirdparty_sources = [
    "swappy/common/CpuInfo.cpp",
    "swappy/common/Thread.cpp",
    "swappy/common/SwappyDisplayManager.cpp",
    "swappy/common/SwappyCommon.cpp",
    "swappy/common/ChoreographerFilter.cpp",
    "swappy/common/CPUTracer.cpp",
    "swappy/common/Settings.cpp",
    "swappy/common/swappy_c.cpp",
    "swappy/common/ChoreographerThread.cpp",
    "swappy/vulkan/SwappyVk.cpp",
    "swappy/vulkan/SwappyVkFallback.cpp",
    "swappy/vulkan/SwappyVkGoogleDisplayTiming.cpp",
    "swappy/vulkan/SwappyVkBase.cpp",
    "swappy/vulkan/swappyVk_c.cpp",
    "swappy/opengl/FrameStatisticsGL.cpp",
    "swappy/opengl/swappyGL_c.cpp",
    "swappy/opengl/SwappyGL.cpp",
    "swappy/opengl/EGL.cpp",
    "common/apk_utils.cpp",
    "common/system_utils.cpp",
    "common/jni/jni_helper.cpp",
    "common/jni/jnictx.cpp",
    "common/jni/jni_wrap.cpp",
]
thirdparty_sources = [thirdparty_dir + file for file in thirdparty_sources]
env_swappy.Append(CPPPATH=[thirdparty_dir + "common"])
env_swappy.Append(CPPPATH=[thirdparty_dir + "swappy/common"])
env_swappy.Append(CPPPATH=[thirdparty_dir + "swappy/vulkan"])
env_swappy.Append(CPPPATH=[thirdparty_dir + "swappy/opengl"])
env_swappy.Append(CPPPATH=[thirdparty_dir + "../include"])
env_swappy.Prepend(CPPPATH=[thirdparty_dir])

env.Append(CPPPATH=[thirdparty_dir + "../include"])
env_swappy.Append(CCFLAGS=["-DANDROIDGAMESDK_NO_BINARY_DEX_LINKAGE"])

env_swappy.disable_warnings()
env_swappy.add_source_files(thirdparty_obj, thirdparty_sources)

env.drivers_sources += thirdparty_obj